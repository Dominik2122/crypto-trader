<h2>Your cryptos:</h2>

<div *ngIf="initTree" class="text-sm">
  <app-tree
    [nodes]="nodes"
    [columns]="accountTreeColumns"
    [viewStrategy]="viewStrategy">

    <app-tree-column>
      <ng-template let-node='node'>
        <p>{{node.data.crypto }}</p>
      </ng-template>
    </app-tree-column>

    <app-tree-column>
      <ng-template let-node='node'>
        <p>{{node.data.price | price }}$</p>
      </ng-template>
    </app-tree-column>

    <app-tree-column>
      <ng-template let-node='node'>
        <p>{{node.data.amount }}</p>
      </ng-template>
    </app-tree-column>

    <app-tree-column>
      <ng-template let-node='node'>
        <p>{{node.data.value }}$</p>
      </ng-template>
    </app-tree-column>

    <app-tree-column
      [popperContent]="popperContent">
      <ng-template let-node='node'>
        <app-button
          [color]="ButtonColors.GREEN"
          class="sell-button">Sell
        </app-button>
      </ng-template>
    </app-tree-column>


  </app-tree>
</div>


<ng-template let-node='data' #popperContent>
  <app-sell
    [crypto]="node.crypto"
    [maxAmount]="node.amount"
    [cryptoPrice]="node.price"
    (sold)="onSold()"
  ></app-sell>
</ng-template>
